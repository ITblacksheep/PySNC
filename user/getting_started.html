
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="X-UA-Compatible" content="IE=Edge" />
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>Getting Started &#8212; PySNC 1.0.2 documentation</title>
    <link rel="stylesheet" href="../_static/alabaster.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <script type="text/javascript" id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <script type="text/javascript" src="../_static/language_data.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Advanced" href="advanced.html" />
    <link rel="prev" title="Installation of PySNC" href="install.html" />
   
  <link rel="stylesheet" href="../_static/custom.css" type="text/css" />
  
  
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9" />

  </head><body>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          

          <div class="body" role="main">
            
  <div class="section" id="getting-started">
<span id="id1"></span><h1>Getting Started<a class="headerlink" href="#getting-started" title="Permalink to this headline">¶</a></h1>
<p>Ensure you are <a class="reference internal" href="install.html#install"><span class="std std-ref">installed</span></a> and have an instance to talk to. A <a class="reference external" href="https://developer.servicenow.com">PDI</a> may be good start for playing around if you do not have access to a development instance.</p>
<div class="section" id="the-servicenow-client">
<h2>The ServiceNow client<a class="headerlink" href="#the-servicenow-client" title="Permalink to this headline">¶</a></h2>
<p>The <code class="docutils literal notranslate"><span class="pre">ServiceNowClient</span></code> is your interface to an instance.</p>
<p>First we import:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">pysnc</span> <span class="k">import</span> <span class="n">ServiceNowClient</span>
</pre></div>
</div>
<p>Then we create a client:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">client</span> <span class="o">=</span> <span class="n">pysnc</span><span class="o">.</span><span class="n">ServiceNowClient</span><span class="p">(</span><span class="s1">&#39;dev00000&#39;</span><span class="p">,</span> <span class="p">(</span><span class="s1">&#39;admin&#39;</span><span class="p">,</span> <span class="n">password</span><span class="p">))</span>
</pre></div>
</div>
<p>We use the client to create a <code class="docutils literal notranslate"><span class="pre">GlideRecord</span></code> object:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">gr</span> <span class="o">=</span> <span class="n">client</span><span class="o">.</span><span class="n">GlideRecord</span><span class="p">(</span><span class="s1">&#39;incident&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>Familiar? The real difference is we follow python naming conventions:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">gr</span><span class="o">.</span><span class="n">add_query</span><span class="p">(</span><span class="s2">&quot;active&quot;</span><span class="p">,</span> <span class="s2">&quot;true&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">gr</span><span class="o">.</span><span class="n">query</span><span class="p">()</span>
</pre></div>
</div>
<p>This means that instead of Java/JavaScript camelCase we use python standard in PEP-8. For example <code class="docutils literal notranslate"><span class="pre">addQuery</span></code> has become <code class="docutils literal notranslate"><span class="pre">add_query</span></code>.</p>
</div>
<div class="section" id="querying-a-record">
<h2>Querying a record<a class="headerlink" href="#querying-a-record" title="Permalink to this headline">¶</a></h2>
<p>The query methods are designed to behave very similarly to the glide implementations:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">gr</span><span class="o">.</span><span class="n">add_query</span><span class="p">(</span><span class="s2">&quot;value&quot;</span><span class="p">,</span> <span class="s2">&quot;&gt;&quot;</span><span class="p">,</span> <span class="s2">&quot;1&quot;</span><span class="p">)</span>
</pre></div>
</div>
<p>Or encoded queries:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">gr</span><span class="o">.</span><span class="n">add_encoded_query</span><span class="p">(</span><span class="s2">&quot;valuesLIKE1^active=true&quot;</span><span class="p">)</span>
</pre></div>
</div>
<p>We can do or conditions:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">o</span> <span class="o">=</span> <span class="n">gr</span><span class="o">.</span><span class="n">add_query</span><span class="p">(</span><span class="s1">&#39;priority&#39;</span><span class="p">,</span><span class="s1">&#39;1&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">o</span><span class="o">.</span><span class="n">add_or_condition</span><span class="p">(</span><span class="s1">&#39;priority&#39;</span><span class="p">,</span><span class="s1">&#39;2&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>Followed by a query:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">gr</span><span class="o">.</span><span class="n">query</span><span class="p">()</span>
</pre></div>
</div>
<p>No HTTP requests are made until <cite>query()</cite> is called.</p>
</div>
<div class="section" id="get-a-single-record">
<h2>Get a single record<a class="headerlink" href="#get-a-single-record" title="Permalink to this headline">¶</a></h2>
<p>We can do our standard get:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">gr</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;6816f79cc0a8016401c5a33be04be441&#39;</span><span class="p">)</span>
<span class="go">True</span>
</pre></div>
</div>
<p>Or an advanced get:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">gr</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;number&#39;</span><span class="p">,</span> <span class="s1">&#39;PRB123456&#39;</span><span class="p">)</span>
<span class="go">True</span>
</pre></div>
</div>
</div>
<div class="section" id="iterating-a-record">
<h2>Iterating a record<a class="headerlink" href="#iterating-a-record" title="Permalink to this headline">¶</a></h2>
<p>There are two methods to iterate a GlideRecord:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="k">while</span> <span class="n">gr</span><span class="o">.</span><span class="n">next</span><span class="p">():</span>
<span class="go">        pass</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">for</span> <span class="n">r</span> <span class="ow">in</span> <span class="n">gr</span><span class="p">:</span>
<span class="go">        pass</span>
</pre></div>
</div>
<p>When using the traditional <cite>next()</cite> function you will have to call <cite>rewind()</cite> if you wish to iterate a second time. The pythonic iteration does not require this and allows for list comprehensions and other python goodies.</p>
</div>
<div class="section" id="limiting-results">
<h2>Limiting Results<a class="headerlink" href="#limiting-results" title="Permalink to this headline">¶</a></h2>
<p>We are using the REST api after all, and sometimes we want to limit the number of requests we make for testing or sanity checking.</p>
<p>We can set limits on the number of results returned, the following will return up to 5 records:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">gr</span><span class="o">.</span><span class="n">limit</span> <span class="o">=</span> <span class="mi">5</span>
</pre></div>
</div>
<p>There is no default limit to the number of records we can query. We can also specify the fields we want to return:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">gr</span><span class="o">.</span><span class="n">fields</span> <span class="o">=</span> <span class="s1">&#39;sys_id,short_description&#39;</span>
</pre></div>
</div>
<p>Or like this:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">gr</span><span class="o">.</span><span class="n">fields</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;sys_id&#39;</span><span class="p">,</span> <span class="s1">&#39;short_description&#39;</span><span class="p">]</span>
</pre></div>
</div>
<p>This can reduce the load on our instance and how long it takes to query results. We can also use the fields feature to dotwalk table to reduce the record queries we need:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">gr</span><span class="o">.</span><span class="n">fields</span> <span class="o">=</span> <span class="s1">&#39;sys_id,assignment_group.short_description&#39;</span>
</pre></div>
</div>
<p>We can also modify the batch size, which is by default 10:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">gr</span> <span class="o">=</span> <span class="n">client</span><span class="o">.</span><span class="n">GlideRecord</span><span class="p">(</span><span class="s1">&#39;...&#39;</span><span class="p">,</span> <span class="n">batch_size</span><span class="o">=</span><span class="mi">50</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">gr</span><span class="o">.</span><span class="n">batch_size</span> <span class="o">=</span> <span class="mi">60</span>
</pre></div>
</div>
<p>Batch size, along with fields and limits, will affect how the API and instance perform. This should be tuned against API usage and instance sempahore set configuration. This documentation does not provide said guidance, when in doubt leave it default.</p>
<p>As a rule of thumb, query only the fields you actually want.</p>
</div>
<div class="section" id="accessing-fields">
<h2>Accessing fields<a class="headerlink" href="#accessing-fields" title="Permalink to this headline">¶</a></h2>
<p>We can access any field value via dot notation or the standard <cite>get_value</cite> and <cite>get_display_value</cite> methods.</p>
<p>For example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">gr</span> <span class="o">=</span> <span class="n">client</span><span class="o">.</span><span class="n">GlideRecord</span><span class="p">(</span><span class="s1">&#39;problem&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">gr</span><span class="o">.</span><span class="n">query</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">gr</span><span class="o">.</span><span class="n">next</span><span class="p">()</span>
<span class="go">True</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">gr</span><span class="o">.</span><span class="n">state</span>
<span class="go">u&#39;3&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">gr</span><span class="o">.</span><span class="n">get_value</span><span class="p">(</span><span class="s1">&#39;state&#39;</span><span class="p">)</span>
<span class="go">u&#39;3&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">gr</span><span class="o">.</span><span class="n">get_display_value</span><span class="p">(</span><span class="s1">&#39;state&#39;</span><span class="p">)</span>
<span class="go">u&#39;Pending Change&#39;</span>
</pre></div>
</div>
<p>The PySNC module has no concept of GlideElement - we cannot infer what a given columns data type may be from the REST API.</p>
</div>
<div class="section" id="setting-fields">
<h2>Setting fields<a class="headerlink" href="#setting-fields" title="Permalink to this headline">¶</a></h2>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">gr</span> <span class="o">=</span> <span class="n">client</span><span class="o">.</span><span class="n">GlideRecord</span><span class="p">(</span><span class="s1">&#39;incident&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">gr</span><span class="o">.</span><span class="n">initialize</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">gr</span><span class="o">.</span><span class="n">state</span> <span class="o">=</span> <span class="mi">4</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">gr</span><span class="o">.</span><span class="n">state</span>
<span class="go">4</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">gr</span><span class="o">.</span><span class="n">set_value</span><span class="p">(</span><span class="s1">&#39;state&#39;</span><span class="p">,</span> <span class="mi">4</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="section" id="length">
<h2>Length<a class="headerlink" href="#length" title="Permalink to this headline">¶</a></h2>
<p>You can use <cite>len</cite> or <cite>get_row_count()</cite>:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">gr</span> <span class="o">=</span> <span class="n">client</span><span class="o">.</span><span class="n">GlideRecord</span><span class="p">(</span><span class="s1">&#39;incident&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">len</span><span class="p">(</span><span class="n">gr</span><span class="p">)</span>
<span class="go">0</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">gr</span><span class="o">.</span><span class="n">get_row_count</span><span class="p">()</span>
<span class="go">0</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">gr</span><span class="o">.</span><span class="n">query</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">len</span><span class="p">(</span><span class="n">gr</span><span class="p">)</span>
<span class="go">20</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">gr</span><span class="o">.</span><span class="n">get_row_count</span><span class="p">()</span>
<span class="go">20</span>
</pre></div>
</div>
</div>
<div class="section" id="insert-update-delete">
<h2>Insert, Update, Delete<a class="headerlink" href="#insert-update-delete" title="Permalink to this headline">¶</a></h2>
<p>We can insert new records:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">gr</span> <span class="o">=</span> <span class="n">client</span><span class="o">.</span><span class="n">GlideRecord</span><span class="p">(</span><span class="s1">&#39;problem&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">gr</span><span class="o">.</span><span class="n">initialize</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">gr</span><span class="o">.</span><span class="n">short_description</span> <span class="o">=</span> <span class="s2">&quot;Example Problem&quot;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">gr</span><span class="o">.</span><span class="n">description</span> <span class="o">=</span> <span class="s2">&quot;Example Description&quot;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">gr</span><span class="o">.</span><span class="n">insert</span><span class="p">()</span>
<span class="go">u&#39;a06252790b6693009fde8a4b33673aed&#39;</span>
</pre></div>
</div>
<p>And update:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">gr</span> <span class="o">=</span> <span class="n">client</span><span class="o">.</span><span class="n">GlideRecord</span><span class="p">(</span><span class="s1">&#39;problem&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">gr</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;a06252790b6693009fde8a4b33673aed&#39;</span><span class="p">)</span>
<span class="go">True</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">gr</span><span class="o">.</span><span class="n">short_description</span> <span class="o">=</span> <span class="s2">&quot;Updated Problem&quot;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">gr</span><span class="o">.</span><span class="n">update</span><span class="p">()</span>
<span class="go">u&#39;a06252790b6693009fde8a4b33673aed&#39;</span>
</pre></div>
</div>
<p>And delete:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">gr</span> <span class="o">=</span> <span class="n">client</span><span class="o">.</span><span class="n">GlideRecord</span><span class="p">(</span><span class="s1">&#39;problem&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">gr</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;a06252790b6693009fde8a4b33673aed&#39;</span><span class="p">)</span>
<span class="go">True</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">gr</span><span class="o">.</span><span class="n">delete</span><span class="p">()</span>
<span class="go">True</span>
</pre></div>
</div>
</div>
</div>


          </div>
          
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
<h1 class="logo"><a href="../index.html">PySNC</a></h1>








<h3>Navigation</h3>
<p class="caption"><span class="caption-text">Contents:</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="install.html">Installation of PySNC</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Getting Started</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#the-servicenow-client">The ServiceNow client</a></li>
<li class="toctree-l2"><a class="reference internal" href="#querying-a-record">Querying a record</a></li>
<li class="toctree-l2"><a class="reference internal" href="#get-a-single-record">Get a single record</a></li>
<li class="toctree-l2"><a class="reference internal" href="#iterating-a-record">Iterating a record</a></li>
<li class="toctree-l2"><a class="reference internal" href="#limiting-results">Limiting Results</a></li>
<li class="toctree-l2"><a class="reference internal" href="#accessing-fields">Accessing fields</a></li>
<li class="toctree-l2"><a class="reference internal" href="#setting-fields">Setting fields</a></li>
<li class="toctree-l2"><a class="reference internal" href="#length">Length</a></li>
<li class="toctree-l2"><a class="reference internal" href="#insert-update-delete">Insert, Update, Delete</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="advanced.html">Advanced</a></li>
<li class="toctree-l1"><a class="reference internal" href="authentication.html">Authentication</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../api.html">The API</a></li>
</ul>

<div class="relations">
<h3>Related Topics</h3>
<ul>
  <li><a href="../index.html">Documentation overview</a><ul>
      <li>Previous: <a href="install.html" title="previous chapter">Installation of PySNC</a></li>
      <li>Next: <a href="advanced.html" title="next chapter">Advanced</a></li>
  </ul></li>
</ul>
</div>
<div id="searchbox" style="display: none" role="search">
  <h3>Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="../search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    </div>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>








        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &copy;2018, Matthew Gill.
      
      |
      Powered by <a href="http://sphinx-doc.org/">Sphinx 1.8.3</a>
      &amp; <a href="https://github.com/bitprophet/alabaster">Alabaster 0.7.12</a>
      
      |
      <a href="../_sources/user/getting_started.rst.txt"
          rel="nofollow">Page source</a>
    </div>

    

    
  </body>
</html>